<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>MM2 Tracker</title>

<style>
body {
    margin: 0;
    font-family: Arial;
    color: white;
    text-align: center;
    background: url("fundo.jpg") no-repeat center center fixed;
    background-size: cover;
}

/* container */
.container {
    max-width: 500px;
    margin: auto;
    padding: 20px;
}

/* glass */
.glass {
    backdrop-filter: blur(15px);
    background: rgba(255,255,255,0.08);
    border-radius: 25px;
    padding: 25px;
    margin-bottom: 20px;
}

/* contador */
#contador {
    font-size: 70px;
    margin: 20px 0;
}

/* grupos */
.group {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 10px 0;
    flex-wrap: wrap;
}

/* bot玫es */
button {
    padding: 12px 20px;
    border-radius: 15px;
    border: none;
    font-size: 16px;
    cursor: pointer;
    color: white;
    background: linear-gradient(135deg, #667eea, #764ba2);
    transition: 0.2s;
}

button:hover {
    transform: scale(1.1);
}

/* glass button */
.btn-glass {
    background: rgba(255,255,255,0.15);
}

/* input */
input {
    padding: 10px;
    border-radius: 10px;
    border: none;
    width: 100px;
    text-align: center;
}

/* anima莽茫o */
.pop {
    animation: pop 0.2s;
}
@keyframes pop {
    0% {transform: scale(1);}
    50% {transform: scale(1.25);}
    100% {transform: scale(1);}
}

/* bot玫es de canto */
.top-buttons {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 10px;
}

/* hist贸rico escondido */
#historico {
    display: none;
    margin-top: 15px;
}
</style>
</head>

<body>

<!-- BOTES DO CANTO -->
<div class="top-buttons">
    <button class="btn-glass" id="btnSom" onclick="toggleSom()"> ON</button>
    <button class="btn-glass" onclick="toggleHist()"></button>
</div>

<div class="container">

<div class="glass">
    <h2> MM2 Tracker</h2>
    <h3> Vit贸rias: <span id="wins">0</span></h3>

    <div id="contador">0</div>

    <div class="group">
        <button onclick="add(1)">+1</button>
        <button onclick="add(5)">+5</button>
        <button onclick="add(10)">+10</button>
    </div>

    <div class="group">
        <button onclick="add(-1)">-1</button>
        <button onclick="add(-5)">-5</button>
        <button onclick="add(-10)">-10</button>
    </div>

    <div class="group">
        <input id="edit" type="number" placeholder="valor">
        <button onclick="setar()">Setar</button>
    </div>

    <div class="group">
        <button onclick="win()"> Vit贸ria</button>
        <button onclick="resetar()">Reset</button>
    </div>
</div>

<div class="glass">
    <div id="historico"></div>
</div>

</div>

<!-- SOM -->
<audio id="click">
    <source src="https://www.myinstants.com/media/sounds/minecraft_click.mp3">
</audio>

<script>

let contador = 0;
let wins = 0;
let som = true; // come莽a ligado

// carregar dados
function carregar(){
    contador = parseInt(localStorage.getItem("contador")) || 0;
    wins = parseInt(localStorage.getItem("wins")) || 0;

    if(localStorage.getItem("som") !== null){
        som = localStorage.getItem("som") === "true";
    }

    atualizar();
    atualizarSomUI();
}

// salvar
function salvar(){
    localStorage.setItem("contador", contador);
    localStorage.setItem("wins", wins);
    localStorage.setItem("som", som);
}

// atualizar tela
function atualizar(){
    document.getElementById("contador").innerText = contador;
    document.getElementById("wins").innerText = wins;
}

// atualizar bot茫o som
function atualizarSomUI(){
    let btn = document.getElementById("btnSom");
    btn.innerText = som ? " ON" : " OFF";
}

// tocar som
function play(){
    if(som){
        let audio = document.getElementById("click");
        audio.currentTime = 0;
        audio.play();
    }
}

// ligar/desligar som
function toggleSom(){
    som = !som;
    salvar();
    atualizarSomUI();
}

// adicionar
function add(v){
    contador += v;
    if(contador < 0) contador = 0;

    salvar();
    atualizar();
    animar();
}

// vit贸ria
function win(){
    wins++;
    salvar();
    atualizar();
    play();
}

// set manual
function setar(){
    let v = parseInt(document.getElementById("edit").value);
    if(isNaN(v)) return;

    contador = v;
    salvar();
    atualizar();
    play();
}

// reset + hist贸rico
function resetar(){
    let hist = JSON.parse(localStorage.getItem("hist")) || [];

    let hoje = new Date().toLocaleDateString();
    hist.push({data: hoje, valor: contador});

    localStorage.setItem("hist", JSON.stringify(hist));

    contador = 0;
    salvar();
    atualizar();
}

// abrir/fechar hist贸rico
function toggleHist(){
    let div = document.getElementById("historico");

    if(div.style.display === "none" || div.style.display === ""){
        verHistorico();
        div.style.display = "block";
    } else {
        div.style.display = "none";
    }
}

// mostrar hist贸rico
function verHistorico(){
    let hist = JSON.parse(localStorage.getItem("hist")) || [];
    let div = document.getElementById("historico");

    div.innerHTML = "<h3> Hist贸rico</h3>";

    hist.slice().reverse().forEach(h=>{
        div.innerHTML += `<p>${h.data} - ${h.valor}</p>`;
    });
}

// anima莽茫o
function animar(){
    let el = document.getElementById("contador");
    el.classList.add("pop");
    play();
    setTimeout(()=>el.classList.remove("pop"),200);
}

// reset autom谩tico meia-noite
setInterval(()=>{
    let agora = new Date();
    if(agora.getHours()==0 && agora.getMinutes()==0){
        resetar();
    }
},60000);

carregar();

</script>

</body>
</html>
