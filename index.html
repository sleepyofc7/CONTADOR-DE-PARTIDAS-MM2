<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>MM2 Tracker AAA</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    color: white;
    text-align: center;
    background: url("fundo.jpg") no-repeat center center fixed;
    background-size: cover;
}

/* container */
.container {
    max-width: 520px;
    margin: auto;
    padding: 20px;
}

/* glass premium */
.glass {
    backdrop-filter: blur(20px);
    background: rgba(255,255,255,0.08);
    border-radius: 25px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 0 25px rgba(0,0,0,0.3);
}

/* contador */
#contador {
    font-size: 80px;
    margin: 20px 0;
    text-shadow: 0 0 20px rgba(255,255,255,0.4);
}

/* grupos */
.group {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 12px 0;
    flex-wrap: wrap;
}

/* bot玫es */
button {
    padding: 12px 20px;
    border-radius: 15px;
    border: none;
    font-size: 16px;
    cursor: pointer;
    color: white;
    background: linear-gradient(135deg, #667eea, #764ba2);
    transition: 0.2s;
}

button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 10px rgba(255,255,255,0.5);
}

/* bot玫es transparentes */
.btn-glass {
    background: rgba(255,255,255,0.15);
}

/* input */
input {
    padding: 10px;
    border-radius: 10px;
    border: none;
    width: 100px;
    text-align: center;
}

/* anima莽茫o */
.pop {
    animation: pop 0.2s;
}
@keyframes pop {
    0% {transform: scale(1);}
    50% {transform: scale(1.3);}
    100% {transform: scale(1);}
}

/* bot玫es de canto */
.top-buttons {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 10px;
}

/* hist贸rico */
#historico {
    display: none;
    max-height: 250px;
    overflow-y: auto;
    text-align: left;
}

.hist-item {
    padding: 8px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}
</style>
</head>

<body>

<!-- BOTES DO CANTO -->
<div class="top-buttons">
    <button class="btn-glass" id="btnSom" onclick="toggleSom()"> ON</button>
    <button class="btn-glass" onclick="toggleHist()"></button>
</div>

<div class="container">

<div class="glass">
    <h2> MM2 Tracker</h2>
    <h3> Vit贸rias: <span id="wins">0</span></h3>

    <div id="contador">0</div>

    <div class="group">
        <button onclick="add(1)">+1</button>
        <button onclick="add(5)">+5</button>
        <button onclick="add(10)">+10</button>
    </div>

    <div class="group">
        <button onclick="add(-1)">-1</button>
        <button onclick="add(-5)">-5</button>
        <button onclick="add(-10)">-10</button>
    </div>

    <div class="group">
        <input id="edit" type="number" placeholder="valor">
        <button onclick="setar()">Setar</button>
    </div>

    <div class="group">
        <button onclick="win()"> Vit贸ria</button>
        <button onclick="resetarManual()">Reset</button>
    </div>
</div>

<div class="glass">
    <div id="historico"></div>
</div>

</div>

<audio id="click">
    <source src="https://www.myinstants.com/media/sounds/minecraft_click.mp3">
</audio>

<script>

let contador = 0;
let wins = 0;
let som = true;

// pegar data atual
function hoje(){
    return new Date().toLocaleDateString();
}

// carregar dados
function carregar(){
    contador = parseInt(localStorage.getItem("contador")) || 0;
    wins = parseInt(localStorage.getItem("wins")) || 0;

    if(localStorage.getItem("som") !== null){
        som = localStorage.getItem("som") === "true";
    }

    checarVirada();
    atualizar();
    atualizarSomUI();
}

// salvar
function salvar(){
    localStorage.setItem("contador", contador);
    localStorage.setItem("wins", wins);
    localStorage.setItem("som", som);
}

// atualizar tela
function atualizar(){
    contadorEl.innerText = contador;
    winsEl.innerText = wins;
}

// som
function atualizarSomUI(){
    btnSom.innerText = som ? " ON" : " OFF";
}

function play(){
    if(som){
        let a = click;
        a.currentTime = 0;
        a.play();
    }
}

function toggleSom(){
    som = !som;
    salvar();
    atualizarSomUI();
}

// adicionar
function add(v){
    contador += v;
    if(contador < 0) contador = 0;

    salvar();
    atualizar();
    animar();
}

// vit贸ria
function win(){
    wins++;
    salvar();
    atualizar();
    play();
}

// set manual
function setar(){
    let v = parseInt(edit.value);
    if(isNaN(v)) return;

    contador = v;
    salvar();
    atualizar();
    play();
}

// salvar hist贸rico do dia
function salvarDia(){
    let hist = JSON.parse(localStorage.getItem("hist")) || [];

    hist.push({
        data: localStorage.getItem("ultimaData"),
        partidas: contador,
        wins: wins
    });

    localStorage.setItem("hist", JSON.stringify(hist));
}

// checar virada de dia
function checarVirada(){
    let ultima = localStorage.getItem("ultimaData");
    let atual = hoje();

    if(!ultima){
        localStorage.setItem("ultimaData", atual);
        return;
    }

    if(ultima !== atual){
        salvarDia();

        contador = 0;
        wins = 0;

        localStorage.setItem("ultimaData", atual);
        salvar();
    }
}

// reset manual
function resetarManual(){
    salvarDia();
    contador = 0;
    wins = 0;
    salvar();
    atualizar();
}

// hist贸rico toggle
function toggleHist(){
    if(historico.style.display === "none"){
        mostrarHist();
        historico.style.display = "block";
    } else {
        historico.style.display = "none";
    }
}

// mostrar hist贸rico
function mostrarHist(){
    let hist = JSON.parse(localStorage.getItem("hist")) || [];

    historico.innerHTML = "<h3> Hist贸rico Di谩rio</h3>";

    hist.slice().reverse().forEach(h=>{
        historico.innerHTML += `
        <div class="hist-item">
             ${h.data}<br>
             Partidas: ${h.partidas}<br>
             Vit贸rias: ${h.wins}
        </div>`;
    });
}

// anima莽茫o
function animar(){
    contadorEl.classList.add("pop");
    play();
    setTimeout(()=>contadorEl.classList.remove("pop"),200);
}

// reset autom谩tico
setInterval(()=>{
    checarVirada();
},60000);

// atalhos DOM
const contadorEl = document.getElementById("contador");
const winsEl = document.getElementById("wins");
const historico = document.getElementById("historico");
const btnSom = document.getElementById("btnSom");

carregar();

</script>

</body>
</html>
