<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>MM2 ULTRA AAA</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    color: white;
    background: url("fundo.jpg") no-repeat center center fixed;
    background-size: cover;
}

/* container */
.container {
    max-width: 550px;
    margin: auto;
    padding: 20px;
}

/* glass */
.glass {
    backdrop-filter: blur(25px);
    background: rgba(255,255,255,0.08);
    border-radius: 30px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 0 30px rgba(0,0,0,0.4);
}

/* t铆tulo */
h2 {
    text-shadow: 0 0 10px rgba(255,255,255,0.5);
}

/* contador */
#contador {
    font-size: 90px;
    text-align: center;
    text-shadow: 0 0 20px #fff, 0 0 40px #667eea;
}

/* grupos */
.group {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin: 12px 0;
    flex-wrap: wrap;
}

/* bot玫es */
button {
    padding: 12px 20px;
    border-radius: 15px;
    border: none;
    font-size: 16px;
    cursor: pointer;
    color: white;
    background: linear-gradient(135deg, #667eea, #764ba2);
    transition: 0.2s;
}

button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 12px rgba(255,255,255,0.6);
}

/* glass button */
.btn-glass {
    background: rgba(255,255,255,0.15);
}

/* input */
input {
    padding: 10px;
    border-radius: 10px;
    border: none;
    width: 100px;
    text-align: center;
}

/* canto */
.top-buttons {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 10px;
}

/* hist贸rico */
#historico {
    display: none;
    max-height: 250px;
    overflow-y: auto;
    text-align: left;
}

/* item hist贸rico */
.hist-item {
    padding: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

/* barra progresso */
.progress {
    height: 15px;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    overflow: hidden;
    margin-top: 10px;
}

.progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #00ffcc, #667eea);
}

/* anima莽茫o */
.pop {
    animation: pop 0.2s;
}
@keyframes pop {
    0% {transform: scale(1);}
    50% {transform: scale(1.3);}
    100% {transform: scale(1);}
}

/* part铆culas */
.particle {
    position: absolute;
    width: 5px;
    height: 5px;
    background: white;
    border-radius: 50%;
    animation: explode 0.6s forwards;
}

@keyframes explode {
    to {
        transform: translate(var(--x), var(--y));
        opacity: 0;
    }
}
</style>
</head>

<body>

<div class="top-buttons">
    <button class="btn-glass" id="btnSom" onclick="toggleSom()"> ON</button>
    <button class="btn-glass" onclick="toggleHist()"></button>
</div>

<div class="container">

<div class="glass">
    <h2> MM2 ULTRA</h2>
    <h3> Vit贸rias: <span id="wins">0</span></h3>

    <div id="contador">0</div>

    <div class="progress">
        <div id="bar" class="progress-bar"></div>
    </div>

    <div class="group">
        <button onclick="add(1)">+1</button>
        <button onclick="add(5)">+5</button>
        <button onclick="add(10)">+10</button>
    </div>

    <div class="group">
        <button onclick="add(-1)">-1</button>
        <button onclick="add(-5)">-5</button>
        <button onclick="add(-10)">-10</button>
    </div>

    <div class="group">
        <input id="edit" type="number" placeholder="valor">
        <button onclick="setar()">Setar</button>
    </div>

    <div class="group">
        <button onclick="win()"> Vit贸ria</button>
        <button onclick="resetarManual()">Reset</button>
    </div>
</div>

<div class="glass">
    <h3> Estat铆sticas</h3>
    <p>Total: <span id="total">0</span></p>
    <p>M茅dia: <span id="media">0</span></p>
    <p> Melhor dia: <span id="melhor">0</span></p>
</div>

<div class="glass">
    <div id="historico"></div>
</div>

</div>

<audio id="click">
<source src="https://www.voicy.network/sounds/uLdev5ASy0yq0g6tTbcvjg-video-game-menu-button-click">
</audio>

<script>

let contador=0,wins=0,som=true;

function hoje(){return new Date().toLocaleDateString();}

// carregar
function carregar(){
contador=+localStorage.contador||0;
wins=+localStorage.wins||0;
som=localStorage.som!=="false";
checarVirada();
update();
updateSom();
calcStats();
}

// salvar
function salvar(){
localStorage.contador=contador;
localStorage.wins=wins;
localStorage.som=som;
}

// UI
function update(){
contadorEl.innerText=contador;
winsEl.innerText=wins;
bar.style.width=Math.min(contador,100)+"%";
}

// som
function updateSom(){
btnSom.innerText=som?" ON":" OFF";
}

function play(){
if(som){click.currentTime=0;click.play();}
}

function toggleSom(){
som=!som;salvar();updateSom();
}

// add
function add(v){
contador+=v;
if(contador<0)contador=0;
salvar();update();animar();particles();
}

// win
function win(){
wins++;salvar();update();play();
}

// set
function setar(){
let v=+edit.value;
if(isNaN(v))return;
contador=v;
salvar();update();play();
}

// salvar dia
function salvarDia(){
let hist=JSON.parse(localStorage.hist||"[]");
hist.push({data:localStorage.data,partidas:contador,wins:wins});
localStorage.hist=JSON.stringify(hist);
}

// virada
function checarVirada(){
let atual=hoje();
if(!localStorage.data){localStorage.data=atual;return;}
if(localStorage.data!==atual){
salvarDia();
contador=0;wins=0;
localStorage.data=atual;
salvar();
}
}

// reset manual
function resetarManual(){
salvarDia();
contador=0;wins=0;
salvar();update();calcStats();
}

// hist贸rico
function toggleHist(){
historico.style.display=historico.style.display=="none"?"block":"none";
mostrarHist();
}

function mostrarHist(){
let hist=JSON.parse(localStorage.hist||"[]");
historico.innerHTML="<h3> Hist贸rico Di谩rio</h3>";
hist.slice().reverse().forEach(h=>{
historico.innerHTML+=`<div class="hist-item">
 ${h.data}<br> ${h.partidas} |  ${h.wins}
</div>`;
});
}

// stats
function calcStats(){
let hist=JSON.parse(localStorage.hist||"[]");
let total=0,melhor=0;
hist.forEach(h=>{
total+=h.partidas;
if(h.partidas>melhor)melhor=h.partidas;
});
let media=hist.length?Math.round(total/hist.length):0;

totalEl.innerText=total;
mediaEl.innerText=media;
melhorEl.innerText=melhor;
}

// anima莽茫o
function animar(){
contadorEl.classList.add("pop");
play();
setTimeout(()=>contadorEl.classList.remove("pop"),200);
}

// part铆culas
function particles(){
for(let i=0;i<10;i++){
let p=document.createElement("div");
p.className="particle";
p.style.left="50%";
p.style.top="40%";
p.style.setProperty("--x",(Math.random()*200-100)+"px");
p.style.setProperty("--y",(Math.random()*200-100)+"px");
document.body.appendChild(p);
setTimeout(()=>p.remove(),600);
}
}

// auto reset
setInterval(()=>checarVirada(),60000);

// refs
const contadorEl=document.getElementById("contador");
const winsEl=document.getElementById("wins");
const historico=document.getElementById("historico");
const btnSom=document.getElementById("btnSom");
const bar=document.getElementById("bar");
const totalEl=document.getElementById("total");
const mediaEl=document.getElementById("media");
const melhorEl=document.getElementById("melhor");

carregar();

</script>

</body>
</html>
